# Linux vi/vim

该使用文档主要内容来源于[菜鸟文档](https://www.runoob.com/linux/linux-vim.html)。

## vi/vim的使用

vi/vim主要分为三种模式：命令模式（Command Mode）、输入模式（Insert Mode）和命令行模式（Command-Line Mode）。

### 命令模式

- **启动与识别**：启动vim后即处于命令模式，此时键盘输入被视为命令而非字符。
- **常用命令**：
  - `i`：切换到输入模式，在光标位置开始输入。
  - `x`：删除光标所在字符。
  - `:`：切换到底线命令模式。
  - `a`：进入插入模式，在光标后方开始输入。
  - `o`：在当前行下方插入新行并进入插入模式。
  - `O`：在当前行上方插入新行并进入插入模式。
  - `dd`：剪切当前行。
  - `yy`：复制当前行。
  - `p`：粘贴剪贴板内容至光标下方。
  - `P`：粘贴剪贴板内容至光标上方。
  - `u`：撤销上一次操作。
  - `Ctrl + r`：重做上一次撤销的操作。

### 输入模式

- **进入与退出**：通过命令模式下的`i`或`a`等命令进入，使用`Esc`键返回命令模式。
- **输入与编辑**：使用常规字符键、方向键、回车键、删除键等进行文本输入和编辑。

### 底线命令模式

- **进入**：通过命令模式下的`:`键进入。
- **常用命令**：
  - `:w`：保存文件。
  - `:q`：退出vim。
  - `:wq`：保存并退出vim。
  - `:q!`：强制退出，不保存修改。

## vi/vim按键说明

### 第一部分：一般模式的光标移动、复制粘贴、搜索替换

#### 移动光标
- `h`或←：向左移动
- `j`或↓：向下移动
- `k`或↑：向上移动
- `l`或→：向右移动
- `+`：光标移动到非空格符的下一行
-	`-`：光标移动到非空格符的上一行
-	`n` *Space*：n 表示『数字』。按下数字后再按空格键，光标会向右移动这一行的 n 个字符
-	`0`：移动到这一行的最前面字符处
-	`$`：移动到这一行的最后面字符处
-	`H`：移动到这个屏幕的最上方那一行的第一个字符
-	`M`：移动到这个屏幕的中央那一行的第一个字符
-	`L`：光标移动到这个屏幕的最下方那一行的第一个字符
-	`G`：移动到这个文档的最后一行(常用)
- `nG`：n 为数字。移动到这个文档的第 n 行
- `gg`：移动到这个档案的第一行，相当于 1G
- `n` *Enter*：n 为数字。光标向下移动 n 行

> 如果想要进行多次移动的话，例如向下移动 30 行，可以使用 "30j" 或 "30↓" 的组合按键， 亦即加上想要进行的次数(数字)后，按下动作即可！

#### 屏幕滚动
- `[Ctrl] + [f]`：屏幕向下移动一页，相当于 Page Down 按键
- `[Ctrl] + [b]`：屏幕向上移动一页，相当于 Page Up 按键

#### 搜索与替换
- `/word`：向下搜索`word`
- `?word`：向上搜索`word`
- `n`：重复前一次搜索
- `N`：反向重复前一次搜索
- `:n1,n2s/word1/word2/g`：n1 与 n2 为数字。在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2
- `:1,$s/word1/word2/g` 或 `:%s/word1/word2/g`：从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2
- `:1,$s/word1/word2/gc` 或 `:%s/word1/word2/gc`：从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2，且在取代前显示提示字符给用户确认 (confirm) 是否需要取代

#### 删除、复制与粘贴
- `x（小写）`：向后删除一个字符
- `X（大写）`：向前删除一个字符
- `nx`：n 为数字，连续向后删除 n 个字符
- `dd`：剪切游标所在行
- `ndd`：n 为数字。剪切光标所在的向下 n 行
- `d1G`：删除光标所在到第一行的所有数据
- `dG`：删除光标所在到最后一行的所有数据
- `d$`：删除游标所在处，到该行的最后一个字符
- `d0`：删除游标所在处，到该行的最前面一个字符
- `yy`：复制游标所在行
- `nyy`：n 为数字。复制光标所在的向下 n 行
- `y1G`：复制游标所在行到第一行的所有数据
- `yG`：复制游标所在行到最后一行的所有数据
- `y0`：复制光标所在的那个字符到该行行首的所有数据
- `y$`：复制光标所在的那个字符到该行行尾的所有数据
- `p（小写）`：将已复制的数据粘贴在光标下一行
- `P（大写）`：将已复制的数据粘贴在光标上一行
- `u`：恢复前一个动作
- `.`：重复上一个动作

### 第二部分：切换到编辑模式的按钮

- `i`：从光标位置开始输入
- `a`：从光标后一个字符开始输入
- `o`：在光标下一行开始输入
- `r`：开始取代模式，只会取代光标所在的那一个字符一次
- `R`：开始取代模式，一直取代光标所在的文字，直到按下 ESC 为止

### 第三部分：切换到指令行模式的按钮

- `:w`：保存文件
- `:q`：退出vim
- `:wq`：保存并退出
- `ZZ`：保存并退出
- `ZQ`：不保存，强制退出
- `:w` *filename*：将编辑的数据储存成另一个档案（类似另存新档）
- `:r` *filename*：在编辑的数据中，将 *filename* 这个档案内容加到游标所在行后面
- `:n1,n2 w` *filename*：将 n1 到 n2 的内容储存成 filename 这个档案
- `:!` *command*：暂时离开 vi 到指令行模式下执行 command 的显示结果

## vim环境的变更

- `:set nu`：显示行号
- `:set nonu`：取消行号显示
